# トラブルシューティング

このドキュメントでは、`slack-reaction` ツールを使用する際に発生する可能性のある問題とその解決方法を説明します。

## エラー: チャンネルに参加していません

**原因**: トークンを発行したユーザーが、分析対象のチャンネルに参加していない

**解決方法**: Slackでチャンネルに参加する必要があります

### チャンネルへの参加方法

1. **Slackアプリを開く**
   - デスクトップアプリまたはWebブラウザでSlackにログインします

2. **チャンネルを検索**
   - 左側のサイドバーで「チャンネル」セクションを確認
   - または、検索バー（`Cmd+K` / `Ctrl+K`）でチャンネル名を検索

3. **チャンネルに参加**
   - パブリックチャンネルの場合:
     - チャンネル名をクリックして開く
     - 「参加」ボタンをクリック
   - プライベートチャンネルの場合:
     - チャンネルのメンバーに招待を依頼する必要があります
     - または、チャンネルの管理者に連絡して参加を依頼してください

4. **参加確認**
   - チャンネルに参加すると、左側のサイドバーにチャンネル名が表示されます
   - チャンネル内でメッセージを送信できるようになります

5. **ツールを再実行**
   - チャンネルに参加した後、再度ツールを実行してください

### 注意事項

- **パブリックチャンネル**: 誰でも参加できます
- **プライベートチャンネル**: 招待が必要です。チャンネルのメンバーまたは管理者に連絡してください
- **アーカイブ済みチャンネル**: アーカイブされたチャンネルには参加できません。チャンネルを復元する必要があります

## エラー: 環境変数 SLACK_USER_TOKEN が設定されていません

**原因**: 環境変数が正しく設定されていない

**解決方法**:

1. 環境変数が設定されているか確認: `echo $SLACK_USER_TOKEN`
2. 設定されていない場合は、[Slackトークン取得方法](slack-token-setup.md)を参照して設定してください
3. 新しいターミナルセッションを開いた場合は、再度設定が必要です

## エラー: invalid_auth または not_authed

**原因**: トークンが無効または期限切れ

**解決方法**:

1. トークンが正しくコピーされているか確認してください
2. トークンが再生成されていないか確認してください
3. 必要に応じて、新しいトークンを取得してください

詳細は[Slackトークン取得方法](slack-token-setup.md)を参照してください。

## エラー: missing_scope

**原因**: 必要なスコープが設定されていない

**解決方法**:

1. Slackアプリの設定で、[Slackトークン取得方法](slack-token-setup.md)に記載されている「必須スコープ」がすべて追加されているか確認してください
2. スコープを追加した後、アプリを再インストールする必要がある場合があります
3. 「**Install to Workspace**」を再度クリックして、権限を更新してください

## エラー: チャンネルが見つからない

**原因**:

- チャンネル名が間違っている
- プライベートチャンネルで、`groups:read` スコープが設定されていない
- アプリがチャンネルにアクセスする権限がない

**解決方法**:

1. チャンネル名が正しいか確認してください（大文字小文字を区別します）
2. プライベートチャンネルの場合は、`groups:read` と `groups:history` スコープを追加してください
3. アプリを再インストールして、権限を更新してください

詳細は[Slackトークン取得方法](slack-token-setup.md)を参照してください。

## 関連ドキュメント

- [Slackトークン取得方法](slack-token-setup.md) - Slack User Tokenの取得と設定方法の詳細ガイド
- [コントリビューションガイドライン](CONTRIBUTING.md) - プロジェクトへの貢献方法と開発ガイドライン
- [README.md](../README.md) - プロジェクトの概要と使用方法
